apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "1"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app":"enterprise-gateway","chart":"enterprise-gateway-3.2.3","component":"enterprise-gateway","gateway-selector":"enterprise-gateway","heritage":"Helm","release":"enterprise-gateway","ss.eg-cluster":"test"},"name":"enterprise-gateway","namespace":"enterprise-gateway-ns"},"spec":{"replicas":1,"selector":{"matchLabels":{"gateway-selector":"enterprise-gateway"}},"template":{"metadata":{"labels":{"app":"enterprise-gateway","component":"enterprise-gateway","gateway-selector":"enterprise-gateway","ss.eg-cluster":"test"}},"spec":{"containers":[{"env":[{"name":"EG_PORT","value":"8888"},{"name":"EG_RESPONSE_PORT","value":"8877"},{"name":"EG_NAMESPACE","value":"enterprise-gateway-ns"},{"name":"EG_KERNEL_CLUSTER_ROLE","value":"kernel-controller"},{"name":"EG_SHARED_NAMESPACE","value":"True"},{"name":"EG_MIRROR_WORKING_DIRS","value":"False"},{"name":"EG_CULL_IDLE_TIMEOUT","value":"900"},{"name":"EG_CULL_CONNECTED","value":"True"},{"name":"EG_LOG_LEVEL","value":"DEBUG"},{"name":"EG_KERNEL_LAUNCH_TIMEOUT","value":"60"},{"name":"EG_KERNEL_INFO_TIMEOUT","value":""},{"name":"EG_ALLOWED_KERNELS","value":"[\"r_kubernetes\",\"python_kubernetes\",\"python_tf_kubernetes\",\"python_tf_gpu_kubernetes\",\"scala_kubernetes\",\"spark_r_kubernetes\",\"spark_python_kubernetes\",\"spark_scala_kubernetes\",\"spark_python_operator\",\"python_math_kubernetes\"]"},{"name":"EG_DEFAULT_KERNEL_NAME","value":"python_kubernetes"},{"name":"EG_INHERITED_ENVS","value":"PATH"},{"name":"EG_KERNEL_SESSION_PERSISTENCE","value":"True"},{"name":"EG_PERSISTENCE_ROOT","value":"/usr/local/share/persistence"}],"image":"elyra/enterprise-gateway:3.2.3","imagePullPolicy":"IfNotPresent","name":"enterprise-gateway","ports":[{"containerPort":8888},{"containerPort":8877}],"resources":{"limits":{"cpu":1,"memory":"800Mi"},"requests":{"cpu":"500m","memory":"300Mi"}},"volumeMounts":[{"mountPath":"/usr/local/share/jupyter/kernels/python_math_kubernetes","name":"python-math-kubernetes","readOnly":true},{"mountPath":"/usr/local/share/persistence","name":"shared-persistence"}]}],"serviceAccountName":"enterprise-gateway-sa","terminationGracePeriodSeconds":60,"volumes":[{"hostPath":{"path":"/home/etl/enterprise-gateway/kernels/python_math_kubernetes"},"name":"python-math-kubernetes"},{"name":"shared-persistence","persistentVolumeClaim":{"claimName":"enterprise-shared-volume"}}]}}}}
  creationTimestamp: "2024-07-03T02:38:32Z"
  generation: 1
  labels:
    app: enterprise-gateway
    chart: enterprise-gateway-3.2.3
    component: enterprise-gateway
    gateway-selector: enterprise-gateway
    heritage: Helm
    release: enterprise-gateway
    ss.eg-cluster: test
  name: enterprise-gateway
  namespace: enterprise-gateway-ns
  resourceVersion: "9590072"
  uid: ec0e5cdd-d84a-46de-ac7b-f519867f316f
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      gateway-selector: enterprise-gateway
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: enterprise-gateway
        component: enterprise-gateway
        gateway-selector: enterprise-gateway
        ss.eg-cluster: test
    spec:
      containers:
      - env:
        - name: EG_PORT
          value: "8888"
        - name: EG_RESPONSE_PORT
          value: "8877"
        - name: EG_NAMESPACE
          value: enterprise-gateway-ns
        - name: EG_KERNEL_CLUSTER_ROLE
          value: kernel-controller
        - name: EG_SHARED_NAMESPACE
          value: "True"
        - name: EG_MIRROR_WORKING_DIRS
          value: "False"
        - name: EG_CULL_IDLE_TIMEOUT
          value: "900"
        - name: EG_CULL_CONNECTED
          value: "True"
        - name: EG_LOG_LEVEL
          value: DEBUG
        - name: EG_KERNEL_LAUNCH_TIMEOUT
          value: "60"
        - name: EG_KERNEL_INFO_TIMEOUT
        - name: EG_ALLOWED_KERNELS
          value: '["r_kubernetes","python_kubernetes","python_tf_kubernetes","python_tf_gpu_kubernetes","scala_kubernetes","spark_r_kubernetes","spark_python_kubernetes","spark_scala_kubernetes","spark_python_operator","python_math_kubernetes"]'
        - name: EG_DEFAULT_KERNEL_NAME
          value: python_kubernetes
        - name: EG_INHERITED_ENVS
          value: PATH
        - name: EG_KERNEL_SESSION_PERSISTENCE
          value: "True"
        - name: EG_PERSISTENCE_ROOT
          value: /usr/local/share/persistence
        image: elyra/enterprise-gateway:3.2.3
        imagePullPolicy: IfNotPresent
        name: enterprise-gateway
        ports:
        - containerPort: 8888
          protocol: TCP
        - containerPort: 8877
          protocol: TCP
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 500m
            memory: 300Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /usr/local/share/jupyter/kernels/python_math_kubernetes
          name: python-math-kubernetes
          readOnly: true
        - mountPath: /usr/local/share/persistence
          name: shared-persistence
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: enterprise-gateway-sa
      serviceAccountName: enterprise-gateway-sa
      terminationGracePeriodSeconds: 60
      volumes:
      - hostPath:
          path: /home/etl/enterprise-gateway/kernels/python_math_kubernetes
          type: ""
        name: python-math-kubernetes
      - name: shared-persistence
        persistentVolumeClaim:
          claimName: enterprise-shared-volume
status:
  availableReplicas: 1
  conditions:
  - lastTransitionTime: "2024-07-03T02:38:32Z"
    lastUpdateTime: "2024-07-03T02:38:36Z"
    message: ReplicaSet "enterprise-gateway-6c8dbdc74c" has successfully progressed.
    reason: NewReplicaSetAvailable
    status: "True"
    type: Progressing
  - lastTransitionTime: "2024-07-26T13:32:19Z"
    lastUpdateTime: "2024-07-26T13:32:19Z"
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: "True"
    type: Available
  observedGeneration: 1
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1